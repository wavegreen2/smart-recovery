<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>Baccarat Money Management (Exact Python Logic)</title>
    <style>
        body { font-family: 'Consolas', monospace; background: #1a1a1a; color: #00ff00; padding: 20px; }
        .container { max-width: 800px; margin: auto; border: 1px solid #333; padding: 20px; border-radius: 10px; }
        .stats { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 20px; text-align: center; }
        .stat-box { background: #222; padding: 10px; border-radius: 5px; border: 1px solid #444; }
        .bet-area { text-align: center; font-size: 2.5rem; margin: 30px 0; color: #ffff00; }
        .btn-group { display: flex; gap: 10px; justify-content: center; }
        button { padding: 15px 30px; font-size: 1rem; cursor: pointer; border-radius: 5px; border: none; font-weight: bold; }
        .btn-p { background: #007bff; color: white; }
        .btn-b { background: #dc3545; color: white; }
        .btn-t { background: #28a745; color: white; }
        .log-area { background: #000; height: 200px; overflow-y: auto; padding: 10px; margin-top: 20px; font-size: 0.9rem; border: 1px solid #333; }
    </style>
</head>
<body>

<div class="container">
    <div class="stats">
        <div class="stat-box">Net Profit<br><span id="net_profit">0.00</span></div>
        <div class="stat-box">Status<br><span id="status">VIRTUAL</span></div>
        <div class="stat-box">Session<br><span id="session_count">1</span></div>
    </div>

    <div class="bet-area">
        <div style="font-size: 1rem; color: #888;">NEXT RECOMMENDED BET</div>
        üëâ [BET: <span id="current_bet">5.0</span>]
    </div>

    <div class="btn-group">
        <button class="btn-p" onclick="handleInput('P')">PLAYER (P)</button>
        <button class="btn-t" onclick="handleInput('T')">TIE (T)</button>
        <button class="btn-b" onclick="handleInput('B')">BANKER (B)</button>
    </div>

    <div class="log-area" id="log"></div>
</div>

<script>
    // --- ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ (‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô) ---
    const UNIT = 5.0;
    const CHIP = 5.0;
    const VIRTUAL_LIMIT = 5;
    const MARTY_LIMIT = 4;

    // --- ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö ---
    let globalNet = 0.0;
    let virtualWins = 0;
    let isReal = false;
    let consecutiveLoss = 0;
    let lastBetAmount = UNIT;
    let sessionID = 1;
    let currentSessionLoss = 0; // ‡∏¢‡∏≠‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÉ‡∏ô session ‡∏ô‡∏±‡πâ‡∏ô‡πÜ

    function calculateBet() {
        if (!isReal) return UNIT;

        // 1. ‡∏ñ‡πâ‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏ó‡∏á‡∏à‡∏£‡∏¥‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏ô‡∏∞‡πÑ‡∏°‡πâ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏à‡∏ö Session
        if (consecutiveLoss === 0) {
            if (globalNet < 0) {
                // ‡∏™‡∏π‡∏ï‡∏£ Recovery: (‡∏¢‡∏≠‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏™‡∏∞‡∏™‡∏° + ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢) / 5
                let needed = Math.abs(globalNet) + UNIT;
                let bet = Math.ceil((needed / 5) / 1) * 1; // ‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏•‡∏Ç‡∏Å‡∏•‡∏°‡πÜ ‡∏ï‡∏≤‡∏° Log (‡πÄ‡∏ä‡πà‡∏ô 750)
                
                // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏ñ‡πâ‡∏≤‡πÅ‡∏ó‡∏á‡πÑ‡∏°‡πâ‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏õ‡πâ‡∏≤ ‡πÉ‡∏´‡πâ‡πÅ‡∏ó‡∏á‡πÅ‡∏Ñ‡πà‡πÄ‡∏®‡∏©‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏î (Perfect Exit ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô 745.8)
                if (globalNet + bet > UNIT) {
                    return parseFloat((UNIT - globalNet).toFixed(1));
                }
                return bet < UNIT ? UNIT : bet;
            }
            return UNIT;
        } 
        
        // 2. ‡∏ñ‡πâ‡∏≤‡πÅ‡∏û‡πâ (Martingale)
        // ‡∏™‡∏π‡∏ï‡∏£‡∏ï‡∏≤‡∏° Log: (‡πÑ‡∏°‡πâ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß * 2) - UNIT
        let nextMarty = (lastBetAmount * 2) - UNIT;
        
        // ‡πÑ‡∏°‡πâ‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á Marty (‡πÑ‡∏°‡πâ 4) ‡πÉ‡∏ô Log ‡∏ö‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£ x2 ‡πÄ‡∏ï‡πá‡∏°‡πÜ 
        if (consecutiveLoss === 3) {
            nextMarty = lastBetAmount * 2;
        }

        return nextMarty;
    }

    function handleInput(result) {
        if (result === 'T') return; // ‡∏Ç‡πâ‡∏≤‡∏° Tie

        const bet = calculateBet();
        const isWin = (result === 'P'); // ‡∏ï‡∏≤‡∏° Log ‡πÄ‡∏ô‡πâ‡∏ô‡πÅ‡∏ó‡∏á P

        if (!isReal) {
            // ‡πÇ‡∏´‡∏°‡∏î Virtual
            if (isWin) virtualWins++; else virtualWins = 0;
            addLog(`[V] Result: ${result} | Streak: ${virtualWins}/${VIRTUAL_LIMIT}`);
            
            if (virtualWins >= VIRTUAL_LIMIT) {
                isReal = true;
                consecutiveLoss = 0;
                addLog(`üîî START REAL SESSION ${sessionID}`);
            }
        } else {
            // ‡πÇ‡∏´‡∏°‡∏î‡πÅ‡∏ó‡∏á‡∏à‡∏£‡∏¥‡∏á
            lastBetAmount = bet;
            if (isWin) {
                globalNet += bet;
                consecutiveLoss = 0;
                addLog(`üëâ [BET: ${bet}] Result: ${result} | WIN | Net: ${globalNet.toFixed(1)}`);
                
                // ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏à‡∏ö Session
                if (globalNet >= UNIT) {
                    addLog(`‚úÖ [Session ${sessionID}] Status: WIN | Net: ${globalNet.toFixed(1)}`);
                    resetToVirtual();
                }
            } else {
                globalNet -= bet;
                consecutiveLoss++;
                addLog(`üëâ [BET: ${bet}] Result: ${result} | LOSS | Net: ${globalNet.toFixed(1)}`);
                
                if (consecutiveLoss >= MARTY_LIMIT) {
                    addLog(`‚ùå [Session ${sessionID}] Status: STOP_LOSS | Net: ${globalNet.toFixed(1)}`);
                    resetToVirtual();
                }
            }
        }
        updateUI();
    }

    function resetToVirtual() {
        isReal = false;
        virtualWins = 0;
        consecutiveLoss = 0;
        sessionID++;
    }

    function updateUI() {
        document.getElementById('net_profit').innerText = globalNet.toFixed(1);
        document.getElementById('status').innerText = isReal ? "REAL" : `VIRTUAL (${virtualWins}/${VIRTUAL_LIMIT})`;
        document.getElementById('status').style.color = isReal ? "#ff4444" : "#00ff00";
        document.getElementById('current_bet').innerText = calculateBet().toLocaleString();
        document.getElementById('session_count').innerText = sessionID;
    }

    function addLog(msg) {
        const logDiv = document.getElementById('log');
        logDiv.innerHTML += `<div>${msg}</div>`;
        logDiv.scrollTop = logDiv.scrollHeight;
    }

    updateUI();
</script>
</body>
</html>
